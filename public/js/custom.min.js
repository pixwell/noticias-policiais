jQuery.noConflict(),function(r){var s=r("#main-menu");r("#toggle-menu a").click(function(e){e.preventDefault(),s.toggle("slow")});var t=r("#form-registro"),a=r("#nome-ocorrencia"),n=r("#cidade-ocorrencia"),o=r("#titulo-ocorrencia"),i=r("#texto-ocorrencia"),l=r("#status-envio-ocorrencia");function c(e,s){return e.css({border:"1px solid red",color:"red"}).attr("placeholder",s),e.focus(function(){r(this).removeAttr("style").removeAttr("placeholder")}),!1}t.submit(function(e){e.preventDefault();var s={author:a.val(),categories_id:n.val(),title:o.val(),content:i.val()};if(s.author?s.categories_id?s.title?s.content||c(i,"Insira o texto da sua ocorrência."):c(o,"Insira um título para a sua ocorrência."):c(n,"Escolha a sua cidade."):c(a,"Insira seu nome."),!(a.val()&&n.val()&&o.val()&&i.val()))return!1;r.ajax({url:"/store-ocorrencia",type:"POST",data:s,beforeSend:function(){l.empty().hide().html('<p class="status-processing">Enviando ...</p>').slideDown()},success:function(e){l.empty().hide().html(e).slideDown(),t.get(0).reset()},error:function(e){l.empty().html(e)}})});var u=r("#form-login"),d=r("#login"),v=r("#password"),m=r("#status-login");u.submit(function(e){e.preventDefault();var s={login:d.val(),password:v.val()};if(s.login?s.password||c(v,"Insira a sua senha."):c(d,"Insira seu login."),!d.val()||!v.val())return!1;r.ajax({url:"/auth",type:"POST",data:s,beforeSend:function(){m.empty().hide().html('<p class="status-processing">Enviando ...</p>').slideDown()},success:function(e){m.empty().hide();var s=JSON.parse(e);s.status?(u.get(0).reset(),window.location.href=s.redirect):m.empty().hide().html(s.mensagem).slideDown()},error:function(){m.empty().hide().html('<div class="status-fail">Erro ao fazer login.</div>').slideDown()}})});var p=r("#form-create-user"),f=(a=r("#nome"),d=r("#login"),r("#pass1")),h=r("#pass2"),g=r("#status-user");p.submit(function(e){e.preventDefault();var s={name:a.val(),login:d.val(),password:f.val()};if(s.name?s.login?f.val()?h.val()||c(h,""):c(f,""):c(d,"Insira um Login"):c(a,"Insira seu nome"),f.val()&&h.val()){if(f.val()!==h.val())return g.empty().hide().html('<p class="status-fail">As senhas <strong>NÃO</strong> combinam. Por favor, corrija para prosseguir.</p>').slideDown(),!1;s.password=f.val(),g.slideDown("slow",function(){r(this).empty()})}if(!(d.val()&&f.val()&&h.val()))return!1;r.ajax({url:"/store-user",type:"POST",data:s,beforeSend:function(){g.empty().hide().html('<p class="status-processing">Enviando ...</p>').slideDown()},success:function(e){var s=JSON.parse(e);g.empty().hide().html(s.mensagem).slideDown(),s.status&&p.get(0).reset()},error:function(){g.empty().html('<div class="status-fail">Erro ao fazer login.</div>')}})}),r(".btn-status").on("click",function(e){e.preventDefault();var s=r(this).data("id"),t=r(this),a=t.width();r.ajax({url:"/admin/"+s+"/change-status",type:"POST",data:{id:s},beforeSend:function(){t.hasClass("btn-success")&&t.removeClass("btn-success").addClass("btn-processing"),t.width(a).empty().html('<div class="text-center"><svg style="margin: 0; width: 24px; height: 24px;"><use href="#loader" /></svg></div>')},success:function(e){var s=JSON.parse(e);t.removeClass("btn-success btn-processing").removeAttr("style").css("margin-right","5px").addClass(s.class).empty().html(s.content)},error:function(){t.removeClass("btn-success btn-processing").removeAttr("style").css("margin-right","5px").empty().html('<div class="btn-processing">Erro!</div>')}})})}(jQuery);